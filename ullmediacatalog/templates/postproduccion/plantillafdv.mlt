<?xml version='1.0' encoding='utf-8'?>
<mlt title="Píldora UDV">

 <!-- Productor de la imagen de fondo -->
 <producer in="0" out="{{ data.duracion }}" id="1" >
  <property name="mlt_type" >producer</property>
  <property name="aspect_ratio" >1</property>
  <property name="length" >{{ data.duracion }}</property>
  <property name="eof" >pause</property>
  <property name="resource" >{{ data.plantilla.fondo }}</property>
  <property name="ttl" >25</property>
  <property name="progressive" >1</property>
  <property name="mlt_service" >pixbuf</property>
 </producer>

 <!-- Lista de reproducción de la imagen de fondo -->
 <playlist id="playlist_fondo" >
  <entry in="0" out="{{ data.duracion }}" producer="1" />
 </playlist>

 <!-- Productor de la diapositiva -->
 <producer in="0" out="{{ data.duracion }}" id="2" >
  <property name="mlt_type" >producer</property>
  <property name="aspect_ratio" >1.000000</property>
  <property name="length" >{{ data.duracion }}</property>
  <property name="eof" >pause</property>
  <property name="resource" >{{ data.diapositiva.fichero }}</property>
  <property name="meta.media.nb_streams" >1</property>
  <property name="meta.media.0.stream.type" >video</property>
  <property name="meta.media.0.stream.frame_rate" >25</property>
  <property name="meta.media.0.stream.sample_aspect_ratio" >0.000000</property>
  <property name="meta.media.0.codec.pix_fmt" >yuv420p</property>
  <property name="meta.media.0.codec.sample_aspect_ratio" >0.000000</property>
  <property name="meta.media.0.codec.name" >{{ data.diapositiva.vcodec.short }}</property>
  <property name="meta.media.0.codec.long_name" >{{ data.diapositiva.vcodec.long }}</property>
  <property name="meta.media.0.codec.bit_rate" >5000000</property>
  <property name="meta.media.0.codec.profile" >-99</property>
  <property name="meta.media.0.codec.level" >-99</property>
  <property name="seekable" >1</property>
  <property name="meta.attr.title.markup" />
  <property name="meta.attr.author.markup" />
  <property name="meta.attr.copyright.markup" />
  <property name="meta.attr.comment.markup" />
  <property name="meta.attr.album.markup" />
  <property name="av_bypass" >0</property>
  <property name="audio_index" >-1</property>
  <property name="video_index" >0</property>
  <property name="mlt_service" >avformat</property>
  <property name="source_fps" >1000.000000</property>
  <property name="top_field_first" >0</property>
 </producer>

 <!-- Lista de reproducción de la diapositiva -->
 <playlist id="playlist_diapositiva" >
  <entry in="0" out="{{ data.duracion }}" producer="2" />
 </playlist>

 <!-- Productor del video del presentador -->
 <producer in="0" out="{{ data.duracion }}" id="3" >
  <property name="mlt_type" >producer</property>
  <property name="aspect_ratio" >1.066667</property>
  <property name="length" >{{ data.duracion }}</property>
  <property name="eof" >pause</property>
  <property name="resource" >{{ data.presentador.fichero }}</property>
  <property name="meta.media.nb_streams" >2</property>
  <property name="meta.media.0.stream.type" >audio</property>
  <property name="meta.media.0.codec.sample_fmt" >s16</property>
  <property name="meta.media.0.codec.sample_rate" >44100</property>
  <property name="meta.media.0.codec.channels" >2</property>
  <property name="meta.media.0.codec.name" >{{ data.presentador.acodec.short }}</property>
  <property name="meta.media.0.codec.long_name" >{{ data.presentador.acodec.long }}</property>
  <property name="meta.media.0.codec.bit_rate" >320032</property>
  <property name="meta.media.0.codec.profile" >-99</property>
  <property name="meta.media.0.codec.level" >-99</property>
  <property name="meta.media.1.stream.type" >video</property>
  <property name="meta.media.1.stream.frame_rate" >25.000000</property>
  <property name="meta.media.1.stream.sample_aspect_ratio" >1.066667</property>
  <property name="meta.media.1.codec.pix_fmt" >yuv420p</property>
  <property name="meta.media.1.codec.sample_aspect_ratio" >0.000000</property>
  <property name="meta.media.1.codec.name" >{{ data.presentador.vcodec.short }}</property>
  <property name="meta.media.1.codec.long_name" >{{ data.presentador.vcodec.long }}</property>
  <property name="meta.media.1.codec.bit_rate" >5000000</property>
  <property name="meta.media.1.codec.profile" >-99</property>
  <property name="meta.media.1.codec.level" >-99</property>
  <property name="seekable" >1</property>
  <property name="meta.attr.title.markup" />
  <property name="meta.attr.author.markup" />
  <property name="meta.attr.copyright.markup" />
  <property name="meta.attr.comment.markup" />
  <property name="meta.attr.album.markup" />
  <property name="av_bypass" >0</property>
  <property name="audio_index" >0</property>
  <property name="video_index" >1</property>
  <property name="mlt_service" >avformat</property>
  <property name="source_fps" >1000.000000</property>
  <property name="top_field_first" >0</property>
 </producer>

 <!-- Lista de reproducción del video del presentador -->
 <playlist id="playlist_presentador" >
  <entry in="0" out="{{ data.duracion }}" producer="3" >
   <filter id="crop" >
    <property name="track" >0</property>
    <property name="mlt_type" >filter</property>
    <property name="mlt_service" >crop</property>
    <property name="tag" >crop</property>
    <property name="top" >0</property>
    <property name="left" >140</property>
    <property name="bottom" >0</property>
    <property name="right" >200</property>
   </filter>
  </entry>
 </playlist>

 <!-- Montaje final -->
 <tractor title="Píldora UDV" global_feed="1" in="0" out="{{ data.duracion }}" id="maintractor" >

  <!-- Listas de reproducción a usar -->
  <track producer="playlist_fondo" />
  <track producer="playlist_diapositiva" />
  <track producer="playlist_presentador" />

  <!-- Montaje del vídeo del presentador sobre el fondo -->
  <transition in="0" out="{{ data.duracion }}" id="transition0" >
   <property name="a_track" >0</property>
   <property name="b_track" >2</property>
   <property name="start" >0,0:100%x100%</property>
   <property name="factory" >loader</property>
   <property name="aligned" >1</property>
   <property name="mlt_type" >transition</property>
   <property name="mlt_service" >composite</property>
   <property name="automatic" >1</property>
   <property name="deinterlace" >1</property>
   <property name="distort" >1</property>
   <property name="fill" >0</property>
   <property name="geometry" >{{ data.plantilla.v_geom }}</property>
   <property name="luma_invert" >0</property>
   <property name="operator" >over</property>
   <property name="progressive" >1</property>
   <property name="softness" >1</property>
   <property name="force_track" >1</property>
   <property name="luma" />
  </transition>

  <!-- Montaje de la diapositiva sobre el fondo -->
  <transition in="0" out="{{ data.duracion }}" id="transition1" >
   <property name="a_track" >0</property>
   <property name="b_track" >1</property>
   <property name="start" >0,0:100%x100%</property>
   <property name="factory" >loader</property>
   <property name="aligned" >1</property>
   <property name="mlt_type" >transition</property>
   <property name="mlt_service" >composite</property>
   <property name="automatic" >1</property>
   <property name="deinterlace" >0</property>
   <property name="distort" >0</property>
   <property name="fill" >0</property>
   <property name="geometry" >{{ data.plantilla.d_geom }}</property>
   <property name="luma_invert" >0</property>
   <property name="operator" >over</property>
   <property name="progressive" >1</property>
   <property name="softness" >0</property>
   <property name="force_track" >1</property>
   <property name="luma" />
  </transition>
 </tractor>
</mlt>
